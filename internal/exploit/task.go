package exploit

import (
	"fmt"
	"time"
)

func NewTask(s State, teamId string, teamIp string, environ []string, timeout time.Duration) Task {
	return Task{
		name:       s.ID,
		executable: s.Path,
		dir:        s.Dir,
		teamId:     teamId,
		teamIp:     teamIp,
		timeout:    timeout,
		environ:    environ,
	}
}

type Task struct {
	name       string
	executable string
	dir        string
	teamId     string
	teamIp     string
	environ    []string
	timeout    time.Duration
}

func (et *Task) String() string {
	return fmt.Sprintf(
		"Exploit(path=%s, target=%s (%s), timeout=%v, environ=%+v)",
		et.executable,
		et.teamId,
		et.teamIp,
		et.timeout,
		et.environ,
	)
}
